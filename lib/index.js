!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Qetag=t():e.Qetag=t()}(window,function(){return function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=8)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.file=e,this.hash=""}return e.prototype.set=function(e){this.hash=e},e.prototype.getSync=function(){return this.hash},e.Promise=Promise,e}();t.default=r},function(e,t,n){var r,l,i,o,s,a,p,u,f,c,h,y,d;e.exports=(r=r||(l=Math,i=Object.create||function(){function n(){}return function(e){var t;return n.prototype=e,t=new n,n.prototype=null,t}}(),s=(o={}).lib={},a=s.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},p=s.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=l.ceil(t/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t,n=[],r=function(t){var t=t,n=987654321,r=4294967295;return function(){var e=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return e/=4294967296,(e+=.5)*(.5<l.random()?1:-1)}},i=0;i<e;i+=4){var o=r(4294967296*(t||l.random()));t=987654071*o(),n.push(4294967296*o()|0)}return new p.init(n,e)}}),u=o.enc={},f=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new p.init(n,t/2)}},c=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new p.init(n,t)}},h=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},y=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,r=t.sigBytes,i=this.blockSize,o=4*i,s=r/o,a=(s=e?l.ceil(s):l.max((0|s)-this._minBufferSize,0))*i,u=l.min(4*a,r);if(a){for(var f=0;f<a;f+=i)this._doProcessBlock(n,f);var c=n.splice(0,a);t.sigBytes-=u}return new p.init(c,u)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),s.Hasher=y.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new d.HMAC.init(n,t).finalize(e)}}}),d=o.algo={},o),r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n){this.file=e,this.startByte=t,this.endByte=n}return Object.defineProperty(e.prototype,"size",{get:function(){return this.endByte-this.startByte},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.startByte/this.file.blockSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blob",{get:function(){return this.file.slice(this.startByte,this.endByte)},enumerable:!0,configurable:!0}),e}();t.default=r},function(e,t,n){var r,i,u;e.exports=(r=n(2),u=(i=r).lib.WordArray,i.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<n.length;i++)r[n.charCodeAt(i)]=i}var o=n.charAt(64);if(o){var s=e.indexOf(o);-1!==s&&(t=s)}return function(e,t,n){for(var r=[],i=0,o=0;o<t;o++)if(o%4){var s=n[e.charCodeAt(o-1)]<<o%4*2,a=n[e.charCodeAt(o)]>>>6-o%4*2;r[i>>>2]|=(s|a)<<24-i%4*8,i++}return u.create(r,i)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)},function(e,t,n){var r;e.exports=(r=n(2),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,i=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],r=0;r<t;r++)n[r>>>2]|=e[r]<<24-r%4*8;i.call(this,n,t)}else i.apply(this,arguments)}).prototype=e}}(),r.lib.WordArray)},function(e,t,n){var r,i,o,s,a,u,l,f;e.exports=(r=n(2),o=(i=r).lib,s=o.WordArray,a=o.Hasher,u=i.algo,l=[],f=u.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=0;u<80;u++){if(u<16)l[u]=0|e[t+u];else{var f=l[u-3]^l[u-8]^l[u-14]^l[u-16];l[u]=f<<1|f>>>31}var c=(r<<5|r>>>27)+a+l[u];c+=u<20?1518500249+(i&o|~i&s):u<40?1859775393+(i^o^s):u<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,a=s,s=o,o=i<<30|i>>>2,i=r,r=c}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),i.SHA1=a._createHelper(f),i.HmacSHA1=a._createHmacHelper(f),r.SHA1)},function(e,t,n){"use strict";e.exports=Math.log2||function(e){return Math.log(e)*Math.LOG2E}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(9)),s=i(n(0)),a=n(1);t.Base=a.default;var u=n(3);t.Block=u.default;var f=n(10);t.File=f.default;var c=n(11);t.Normal=c.default;var l=n(13);t.Worker=l.default,t.WorkerProvider=o.default,t.utils=s},function(e,t,n){window,e.exports=function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(i){function e(e){var t=i.call(this)||this;t.workers=[],t.messages=[],t.cpus=window.navigator.hardwareConcurrency||1;for(var n=0;n<t.cpus;n++){var r={buzy:!1,instance:new Worker(e)};t.workers.push(r)}for(n=0;n<t.cpus;n++)t.workers[n].instance.onmessage=t.onmessage.bind(t);return t}return o(e,i),e.isTransferablesSupported=function(){return function(){var e=new ArrayBuffer(1);try{var t=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);r.postMessage(e,[e]),r.terminate()}catch(e){}return!Boolean(e.byteLength)}()},e.asyncFnMover=function(e){var t=new Blob(["\n            $$="+e+";\n            onmessage=function (e) {\n                Promise.resolve(function() {\n                        return $$.apply($$, e.data);\n                    })\n                    .then(\n                        function (res) {\n                            postMessage(res);\n                        },\n                        function (err) {\n                            postMessage({\n                                channel: e.data.channel,\n                                error: err\n                            });\n                        }\n                    )\n            };\n        "],{type:"text/javascript"});return URL.createObjectURL(t)},e.prototype.onmessage=function(e){for(var t=0;t<this.cpus;t++){var n=this.workers[t];e.target===n.instance&&(n.buzy=!1,this.run())}var r=e.data,i=r.channel,o=r.payload,s=r.error;this.emit(i,s,o)},e.prototype.run=function(){for(var e=this.workers.filter(function(e){return!e.buzy}),t=this.messages.length-1;0<=t;t--){var n=e.pop();if(!n)break;var r=this.messages.pop();n.buzy=!0,n.instance.postMessage.apply(n.instance,r)}},e.prototype.send=function(e,t){this.messages.push([e,t]),this.run()},e.prototype.destroy=function(){this.workers.forEach(function(e){e.instance.terminate()}),this.workers=null,this.messages=null,this.removeAllListeners()},e.prototype.removeMessage=function(e){if(this.messages)for(var t=0;t<this.messages.length;t++)if(this.messages[t][0]===e){this.messages.splice(t,1);break}},e.prototype.removeMessagesByChannel=function(e){if(this.messages)for(var t=0,n=this.messages[t];n;)n[0].channel===e?this.messages.splice(t,1):t++,n=this.messages[t]},e}(n(1).EventEmitter);t.default=i},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,c=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}((e.exports=s).EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function f(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,o,s,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),0<(i=f(e))&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function l(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,c(this.listener,this.target,e))}.bind(r);return i.listener=n,r.wrapFn=i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):y(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return f(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(0<t.length&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)c(a,this,t);else{var u=a.length,f=y(a,u);for(n=0;n<u;++n)c(f[n],this,t)}return!0},s.prototype.on=s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,l(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,l(this,e,t)),this},s.prototype.off=s.prototype.removeListener=function(e,t){var n,r,i,o,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},s.prototype.listenerCount=h,s.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}}]).default},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(3)),u=n(0),f=/\.([^.]+)$/,c=1,o=function(){function e(e){var t=e.file,n=void 0===t?null:t,r=e.blockSize,i=void 0===r?4194304:r,o=e.batch,s=void 0===o?u.guid():o;if(!n)throw new Error("QZFile: no file provided!");this.file=n,this.blockSize=i,this.batch=s,this.size=n.size,this.name=n.name||"unknown_"+c++,this.lastModified=n.lastModified||(new Date).getTime();var a=f.exec(n.name)?RegExp.$1.toLowerCase():"";!a&&n.type&&(a=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(n.type)?RegExp.$1.toLowerCase():"")&&(this.name+="."+a),this.ext=a,!n.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?this.type="image/"+("jpg"===this.ext?"jpeg":this.ext):this.type=n.type||"application/octet-stream"}return e.prototype.slice=function(e,t){var n=this.file;return n.slice.call(n,e,t)},e.prototype.getBlocks=function(){if(this.blocks)return this.blocks;for(var e=0,t=[];e<this.size;){var n=e+this.blockSize;n>this.size&&(n=this.size),t.push(new i.default(this,e,n)),e+=this.blockSize}return this.blocks=t},e.prototype.getBlockByIndex=function(e){return this.getBlocks()[e]},e}();t.default=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),a=n(5),u=n(6),f=o(n(7)),c=o(n(12)),l=function(r){function t(e,t){void 0===t&&(t=1);var n=r.call(this,e)||this;return n.concurrency=t,n}return i(t,r),t.prototype.loadNext=function(e){return new t.Promise(function(n,r){var i=new FileReader;i.onload=function(){if(i.result){var e=a.create(i.result),t=u(e);n(t)}else r(new Error("Read file error!"))},i.onloadend=function(){i.onloadend=i.onload=i.onerror=null},i.onerror=function(){r(new Error("Read file error!"))},i.readAsArrayBuffer(e.blob)})},t.prototype.get=function(){var i=this,e=t.Promise;return this.hash?e.resolve(this.hash):e.all(this.file.getBlocks().map(c.default(e).apply(this,[this.concurrency,function(e){return i.loadNext(e)}]))).then(function(e){var t=f.default(i.file.blockSize),n=null;n=1===e.length?e[0]:(t|=128,n=e.reduce(function(e,t){return e.concat(t)}),u(n));var r=new ArrayBuffer(1);return new DataView(r).setUint8(0,t),n=(n=a.create(r).concat(n)).toString(s).replace(/\//g,"_").replace(/\+/g,"-"),i.hash=n})},t}(o(n(1)).default);t.default=l},function(n,e,t){"use strict";function u(e,t,n,r){this.resolve=e,this.fn=t,this.self=n||null,this.args=r}function f(){this._s1=[],this._s2=[]}n.exports=function(e){var a;function t(i,n){var o=new f;function r(t,n,r){if(i){i--;var e=new a(function(e){e(t.apply(n,r))});return e.then(s,s),e}return new a(function(e){o.push(new u(e,t,n,r))})}function s(){if(i++,!o.isEmpty()){var e=o.shift();e.resolve(r(e.fn,e.self,e.args))}}if("function"==typeof i){var e=n;n=i,i=e}if("number"!=typeof i)throw new TypeError("Expected throat size to be a number but got "+typeof i);if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected throat fn to be a function but got "+typeof n);return"function"==typeof n?function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return r(n,this,e)}:function(e){if("function"!=typeof e)throw new TypeError("Expected throat fn to be a function but got "+typeof e);for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);return r(e,this,t)}}if(1===arguments.length&&"function"==typeof e)return a=e,t;if("function"!=typeof(a=n.exports.Promise))throw new Error("You must provide a Promise polyfill for this library to work in older environments");return t(e,arguments[1])},"function"==typeof Promise&&(n.exports.Promise=Promise),f.prototype.push=function(e){this._s1.push(e)},f.prototype.shift=function(){var e=this._s2;if(0===e.length){var t=this._s1;if(0===t.length)return;this._s1=e,e=this._s2=t.reverse()}return e.pop()},f.prototype.isEmpty=function(){return!this._s1.length&&!this._s2.length}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),p=n(5),h=n(6),y=o(n(7)),s=o(n(1)),a=n(0),u=function(r){function t(e,t){var n=r.call(this,e)||this;return n.workers=t,n.channel=a.guid(),n}return i(t,r),t.prototype.get=function(){var c=this,e=t.Promise;return this.hash?e.resolve(this.hash):(this.workers.removeMessagesByChannel(this.channel),this.workers.removeAllListeners(this.channel),new e(function(o,s){var e=c.file.getBlocks(),a=e.length,u=[],f=0;c.workers.on(c.channel,function(e,t){if(e&&s(new Error(t)),u[t.index]=t.data,++f===a){u=u.map(function(e){return l.parse(e)});var n=y.default(c.file.blockSize),r=null;r=1===f?u[0]:(n|=128,r=u.reduce(function(e,t){return e.concat(t)}),h(r));var i=new ArrayBuffer(1);new DataView(i).setUint8(0,n),r=(r=p.create(i).concat(r)).toString(l).replace(/\//g,"_").replace(/\+/g,"-"),c.hash=r,c.workers.removeAllListeners(c.channel),o(r)}}),e.forEach(function(e){c.workers.send({channel:c.channel,payload:{blob:e.blob,index:e.index}})})}))},t}(s.default);t.default=u}])});