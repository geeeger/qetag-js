!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(function(){try{return require("crypto")}catch(t){}}()):"function"==typeof define&&define.amd?define(["crypto"],e):"object"==typeof exports?exports.Qetag=e(function(){try{return require("crypto")}catch(t){}}()):t.Qetag=e(t.crypto)}(window,function(r){return o={},i.m=n=[function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.guid=void 0,e.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(i.prototype.set=function(t){this.hash=t},i.prototype.get=function(){return Promise.resolve(this.hash)},i.prototype.getSync=function(){return this.hash},i);function i(t){this.file=t,this.hash=""}e.default=r},function(e,t,y){(function(d){var t;e.exports=(t=t||function(l){var t;if("undefined"!=typeof window&&window.crypto&&(t=window.crypto),!t&&"undefined"!=typeof window&&window.msCrypto&&(t=window.msCrypto),!t&&void 0!==d&&d.crypto&&(t=d.crypto),!t)try{t=y(12)}catch(t){}var r=function(){if(t){if("function"==typeof t.getRandomValues)try{return t.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof t.randomBytes)try{return t.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},n=Object.create||function(){function n(){}return function(t){var e;return n.prototype=t,e=new n,n.prototype=null,e}}(),e={},i=e.lib={},o=i.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},h=i.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=l.ceil(e/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(r());return new h.init(e,t)}}),s=e.enc={},a=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new h.init(n,e/2)}},u=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new h.init(n,e)}},c=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},f=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e,n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=4*o,a=i/s,u=(a=t?l.ceil(a):l.max((0|a)-this._minBufferSize,0))*o,c=l.min(4*u,i);if(u){for(var f=0;f<u;f+=o)this._doProcessBlock(r,f);e=r.splice(0,u),n.sigBytes-=c}return new h.init(e,c)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),p=(i.Hasher=f.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(n){return function(t,e){return new n.init(e).finalize(t)}},_createHmacHelper:function(n){return function(t,e){return new p.HMAC.init(n,e).finalize(t)}}}),e.algo={});return e}(Math),t)}).call(this,y(11))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(Object.defineProperty(i.prototype,"size",{get:function(){return this.endByte-this.startByte},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this.startByte/this.file.blockSize},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blob",{get:function(){return this.file.slice(this.startByte,this.endByte)},enumerable:!1,configurable:!0}),i);function i(t,e,n){this.file=t,this.startByte=e,this.endByte=n}e.default=r},function(t,e,n){var r;t.exports=(r=n(2),function(){var t=r,c=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<n.length;i++)r[n.charCodeAt(i)]=i}var o=n.charAt(64);if(o){var s=t.indexOf(o);-1!==s&&(e=s)}return function(t,e,n){for(var r=[],i=0,o=0;o<e;o++)if(o%4){var s=n[t.charCodeAt(o-1)]<<o%4*2,a=n[t.charCodeAt(o)]>>>6-o%4*2,u=s|a;r[i>>>2]|=u<<24-i%4*8,i++}return c.create(r,i)}(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),r.enc.Base64)},function(t,e,n){var r;t.exports=(r=n(2),function(){if("function"==typeof ArrayBuffer){var t=r.lib.WordArray,i=t.init;(t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,n=[],r=0;r<e;r++)n[r>>>2]|=t[r]<<24-r%4*8;i.call(this,n,e)}else i.apply(this,arguments)}).prototype=t}}(),r.lib.WordArray)},function(t,e,n){var s;t.exports=(s=n(2),function(){var t=s,e=t.lib,n=e.WordArray,r=e.Hasher,i=t.algo,l=[],o=i.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=0;u<80;u++){if(u<16)l[u]=0|t[e+u];else{var c=l[u-3]^l[u-8]^l[u-14]^l[u-16];l[u]=c<<1|c>>>31}var f=(r<<5|r>>>27)+a+l[u];f+=u<20?1518500249+(i&o|~i&s):u<40?1859775393+(i^o^s):u<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,a=s,s=o,o=i<<30|i>>>2,i=r,r=f}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(64+r>>>9<<4)]=Math.floor(n/4294967296),e[15+(64+r>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=r._createHelper(o),t.HmacSHA1=r._createHmacHelper(o)}(),s.SHA1)},function(t,e,n){"use strict";t.exports=Math.log2||function(t){return Math.log(t)*Math.LOG2E}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.utils=void 0;var s=o(n(0)),a=n(1);Object.defineProperty(e,"Base",{enumerable:!0,get:function(){return a.default}});var u=n(3);Object.defineProperty(e,"Block",{enumerable:!0,get:function(){return u.default}});var c=n(9);Object.defineProperty(e,"File",{enumerable:!0,get:function(){return c.default}});var f=n(10);Object.defineProperty(e,"Normal",{enumerable:!0,get:function(){return f.default}});var l=n(14);Object.defineProperty(e,"Worker",{enumerable:!0,get:function(){return l.default}}),e.utils=s},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(3)),u=n(0),c=/\.([^.]+)$/,f=1,o=(s.prototype.slice=function(t,e){var n=this.file;return n.slice.call(n,t,e)},s.prototype.getBlocks=function(){if(this.blocks)return this.blocks;for(var t=0,e=[];t<this.size;){var n=t+this.blockSize;n>this.size&&(n=this.size),e.push(new i.default(this,t,n)),t+=this.blockSize}return this.blocks=e},s.prototype.getBlockByIndex=function(t){return this.getBlocks()[t]},s);function s(t){var e=t.file,n=void 0===e?null:e,r=t.blockSize,i=void 0===r?4194304:r,o=t.batch,s=void 0===o?u.guid():o;if(!n)throw new Error("QZFile: no file provided!");this.file=n,this.blockSize=i,this.batch=s,this.size=n.size,this.name=n.name||"unknown_"+f++,this.lastModified=n.lastModified||(new Date).getTime();var a=c.exec(n.name)?RegExp.$1.toLowerCase():"";!a&&n.type&&(a=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(n.type)?RegExp.$1.toLowerCase():"")&&(this.name+="."+a),this.ext=a,!n.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?this.type="image/"+("jpg"===this.ext?"jpeg":this.ext):this.type=n.type||"application/octet-stream"}e.default=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s,a=n(4),u=n(5),c=n(6),f=o(n(7)),l=o(n(13)),h=o(n(1)),p=(s=h.default,i(d,s),d.prototype.loadNext=function(t){return new Promise(function(n,r){var i=new FileReader;i.onload=function(){if(i.result){var t=u.create(i.result),e=c(t);n(e)}else r(new Error("Read file error!"))},i.onloadend=function(){i.onloadend=i.onload=i.onerror=null},i.onerror=function(){r(new Error("Read file error!"))},i.readAsArrayBuffer(t.blob)})},d.prototype.get=function(){var i=this;return this.hash?Promise.resolve(this.hash):Promise.all(this.file.getBlocks().map(l.default(Promise).apply(this,[this.concurrency,function(t){return i.loadNext(t)}]))).then(function(t){var e=f.default(i.file.blockSize),n=null;n=1===t.length?t[0]:(e|=128,n=t.reduce(function(t,e){return t.concat(e)}),c(n));var r=new ArrayBuffer(1);return new DataView(r).setUint8(0,e),n=(n=u.create(r).concat(n)).toString(a).replace(/\//g,"_").replace(/\+/g,"-"),i.hash=n})},d);function d(t,e){void 0===e&&(e=1);var n=s.call(this,t)||this;return n.concurrency=e,n}e.default=p},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){if(void 0===r){var n=new Error("Cannot find module 'crypto'");throw n.code="MODULE_NOT_FOUND",n}t.exports=r},function(n,t,e){"use strict";function u(t,e,n,r){this.resolve=t,this.fn=e,this.self=n||null,this.args=r}function c(){this._s1=[],this._s2=[]}n.exports=function(t){var a;function e(i,n){var o=new c;function r(e,n,r){if(i){i--;var t=new a(function(t){t(e.apply(n,r))});return t.then(s,s),t}return new a(function(t){o.push(new u(t,e,n,r))})}function s(){if(i++,!o.isEmpty()){var t=o.shift();t.resolve(r(t.fn,t.self,t.args))}}if("function"==typeof i){var t=n;n=i,i=t}if("number"!=typeof i)throw new TypeError("Expected throat size to be a number but got "+typeof i);if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected throat fn to be a function but got "+typeof n);return"function"==typeof n?function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return r(n,this,t)}:function(t){if("function"!=typeof t)throw new TypeError("Expected throat fn to be a function but got "+typeof t);for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);return r(t,this,e)}}if(1===arguments.length&&"function"==typeof t)return a=t,e;if("function"!=typeof(a=n.exports.Promise))throw new Error("You must provide a Promise polyfill for this library to work in older environments");return e(t,arguments[1])},n.exports.default=n.exports,"function"==typeof Promise&&(n.exports.Promise=Promise),c.prototype.push=function(t){this._s1.push(t)},c.prototype.shift=function(){var t=this._s2;if(0===t.length){var e=this._s1;if(0===e.length)return;this._s1=t,t=this._s2=e.reverse()}return t.pop()},c.prototype.isEmpty=function(){return!this._s1.length&&!this._s2.length}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s,l=n(4),h=n(5),p=n(6),d=o(n(7)),a=o(n(1)),u=n(0),c=(s=a.default,i(f,s),f.prototype.get=function(){var f=this;return this.hash?Promise.resolve(this.hash):(this.workers.removeMessagesByChannel(this.channel),this.workers.removeAllListeners(this.channel),new Promise(function(o,s){var t=f.file.getBlocks(),a=t.length,u=[],c=0;f.workers.on(f.channel,function(t,e){if(t&&s(new Error(e)),u[e.index]=e.data,++c===a){u=u.map(function(t){return l.parse(t)});var n=d.default(f.file.blockSize),r=null;r=1===c?u[0]:(n|=128,r=u.reduce(function(t,e){return t.concat(e)}),p(r));var i=new ArrayBuffer(1);new DataView(i).setUint8(0,n),r=(r=h.create(i).concat(r)).toString(l).replace(/\//g,"_").replace(/\+/g,"-"),f.hash=r,f.workers.removeAllListeners(f.channel),o(r)}}),t.forEach(function(t){f.workers.send({channel:f.channel,payload:{blob:t.blob,index:t.index}})})}))},f);function f(t,e){var n=s.call(this,t)||this;return n.workers=e,n.channel=u.guid(),n}e.default=c}],i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=8);function i(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var n,o});